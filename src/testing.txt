const stripe = require('stripe')(process.env.STRIPE_SECRET_KEY);

const statusCode = 200;
const headers = {
  "Access-Control-Allow-Origin": "*",
  "Access-Control-Allow-Headers": "Content-Type"
};

exports.handler = async (event) => {
  const { sku, quantity } = JSON.parse(event.body);


  try {
    const product = await stripe.products.update(
      'prod_Hv4B4SzJ6tYfug',   //Product.id
      {metadata: {order_id: '6735'}}    //Change Active to false and Quantity to 0
    );
  } catch(e) {
    console.error(e.message)
  }


  return {
    statusCode,
    headers,
    body: JSON.stringify({
      status: "worked,
      message: "Did it work?"
    }),
  };
};
